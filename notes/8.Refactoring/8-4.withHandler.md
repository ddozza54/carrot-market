handler ë¥¼ ì“°ê¸° í¸í•˜ê²Œ í•´ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ê±°ì„

api/users/enter.tsx ì˜ handler í•¨ìˆ˜

ì§€ê¸ˆ ì‘ì„±í•œ ë°©ì‹ì€ ë³„ë¡œë¼, 
ë‹¤ì‹œ í•œ ë²ˆ helper function ì„ ì–´ë–»ê²Œ ì‚¬ìš©í• ì§€ ì ì–´ë³´ê³ , ê·¸ê±¸ êµ¬í˜„í•˜ê¸°ë¡œ!


helper function ì€ server í´ë” ì•ˆì— ë§Œë“¤ê±°ì„. 

handler ëŠ” view ë¥¼ handle í•¨. 

nextJS ì—ì„œ api route ë¥¼ ë§Œë“¤ ë•ŒëŠ” ê·¸ function ì„ export default í•´ì•¼í•¨. 
ì•ˆê·¸ëŸ¼ api ì— ì ‘ì†í–ˆì„ ë•Œ, NextJS ì— ì˜í•´ í˜¸ì¶œë˜ì§€ ì•ŠìŒ. 
ê·¸ëŸ¬ë‹ˆ ê¼­ function ì„ export default í•´ì¤˜ì•¼ í•¨. 



ê·¸ëŸ¼ ì–´ë–»ê²Œ ë§Œë“¤ê¹Œ?
ìš°ì„ ì€ export default withHandler("POST", handlerí•¨ìˆ˜) ì´ëŸ° ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ê±°ì„. 

handler í•¨ìˆ˜ëŠ” export í•˜ì§€ ì•Šê³  ê·¸ëƒ¥ ì‘ì„±í•˜ê³ , 
ê°€ì¥ ì•„ë˜ ì¤„ì— export ~ withHandler ë¡œ ì‘ì„±í• ê±°ì„. 

ê·¸ëŸ¼ 
async function handler(
    req: NextApiRequest,
    res: NextApiResponse
) {
    if (req.method !== "POST") {
        res.status(401).end();
    }

    console.log(req.body);
    res.status(200).end();
}

ê¸°ì¡´ì— ì´ëŸ° ëª¨ì–‘ì´ì˜€ë˜ í•¨ìˆ˜ì—ì„œ ê³µí†µì ì¸ ë¶€ë¶„ì„ ë‹¤ ì§€ì›Œì¤„ ìˆ˜ ìˆìŒ. 
withHandler ì˜ í•µì‹¬ì€
ì´ ì½”ë“œë¥¼ ëŒ€ì‹ í•´ì£¼ëŠ” ê±°ë‹ˆê¹Œ!


withHandler í•¨ìˆ˜ëŠ” 
nextjs ê°€ í•„ìš”ë¡œ í•˜ëŠ” return ê°’ì„ ì¤˜ì•¼í•¨. 

 nextJS ëŠ” ì‚¬ìš©ìê°€ api ë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ì‹¤í–‰í•  í•¨ìˆ˜ê°€ í•„ìš”í•¨. 

 
export default function withHandler(method:"GET"|"POST"|"DELETE", fn: (    req: NextApiRequest,
    res: NextApiResponse)=> void) {
        return async function(req: NextApiRequest, res: NextApiResponse){
            
        }
}

ì´ í•¨ìˆ˜ê°€ nextJS ê°€ ì‹¤í–‰í•  í•¨ìˆ˜ì„. 



ğŸ¤withHandler í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´, 
withHandler í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ functionì„ return í•˜ê¸° ë•Œë¬¸ì— 
nextJS ëŠ” return ëœ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í• ê±°ì„. 

ì¦‰, ìš°ë¦¬ëŠ” handler ì£¼ë³€ì— ê»ë°ê¸°ë¥¼ ë§Œë“¤ê³  ìˆëŠ”ê±°ì„. 

